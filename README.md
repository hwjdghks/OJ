# OJ

TODO 목록

- 프론트 엔드  
메인 화면 + 내비 바(문제 리스트, 채점 결과) : 완성  
문제 리스트 화면 : 완성  
단일 문제 화면 : 완성  
코드 작성 화면 : 완성  
채점 결과 화면 : 완성  

- 백엔드  
문제 리스트 가져오기 : 완성  
단일 문제 정보 가져오기 : 완성  
제출된 코드 등록하기 : 완성  
제출된 코드 정보 가져오기 (채점 결과) : 완성  
rabbitmq로 채점할 문제 정보 전송 : 완성 
채점 결과 업데이트(rabbitmq로 결과 받아서 restapi로 db업데이트) : 완성  

- 채점 로직(파이썬)  
백엔드와 통신할 rabbitmq 준비 : 완성   
채점 서버 생성할 docker SDK 클래스화 : 현재 코드 복잡도가 높지 않아 보류  
채점 서버와 통신할 rabbitmq 큐 클래스화 : 현재 코드 복잡도가 높지 않아 보류  

- 채점 서버  
각 언어별 채점 환경 실행용 도커파일 작성 : 완료(C,C++) 
각 언어별 채점 및 채점 결과를 rabbitmq로 전송하는 스크립트 작성 : 완료(C,C++)  

- 데이터 베이스  
문제 테이블 : 각 문제 정보 저장 : 완성  
코드 테이블 : 제출된 코드 정보 저장 : 완성  

- 도커 파일  
언어별 컴파일 및 실행 환경 도커파일 작성 : 완료  


## 2차 TODO LIST

- 테스트 케이스  
테스트 케이스 자동 생성 프로그램 작성 필요  

- 도커 보안  
  - 네트워크를 전부 끊고 인풋과 아웃풋 파일을 전부 보낼지, 네트워크를 연결하고 아웃풋을 rabbitmq로 보내어 매니저에서 결과를 취합할지 선택해야 함  
  - 스크립트나 도커 파일로 메모리 제한, 시간 제한 추가  
  - 컨테이너 실행 시 cap-drop과 같은 보안 옵션 추가(gpt로 추가 옵션 확인)  
  - 여유있을 때 메모리 공격과 같은 상황에 대한 보안 대책 추가

- 코드 분할  
백엔드 코드 분할  
코어 프로그램 코드 가독성 좋게 재가공 필요성 증가

- 볼륨 추가
데이터를 영구적으로 저장하기 위한 볼륨 추가 필요성 증가(DB)

- 디자인
개별 문제 페이지 디자인 업데이트 필요  
로그인 기능 추가 시 결과 화면 업데이트 및, 개별 문제 통과 여부 추가  
각종 제한 추가시 해당 정보 문제 리스트및 개별 문제 정보에 추가  

- 기능
로그인 및 개별 데이터 유지 추가  
AI 코드 분석 기능 추가(유료 기능이므로 이에 대한 공격 방어 대책 고려)
유저 아웃풋 가공 프로그램 추가 (마지막 공백 한개 제거 및 마지막 줄이 빈줄일 경우 삭제와 같은 포맷 일치)

- 예외처리
백엔드 및 코어 프로그램 예외처리 추가 (컴파일 실패, 연결 실패, 30분 경과로 인한 타임아웃 등)

## 발생한 이슈
- npm run dev로 서버 실행 시 useEffect가 두번 실행됨.  
배포환경에선 한번만 실행되므로 괜찮지만, 두번 실행되는 동작이 디버그에 방해가 될 경우 배포환경에서 테스트 해보기
- 멀티 프로세싱 환경에서 디렉터리 생성 시 생성 에러가 발생. exist 허용으로 임시 수정.
- 한글 깨짐현상 발생. db는 깨지지만 출력이 정상이거나, db는 정상이나 출력이 깨지는 등 다양한 현상 발생  
  에러 재현을 시도했으나 실패. 기존 프로젝트 폴더에서는 db에서는 정상적으로 출력되지만 출력이 깨졌고,  프로젝트를 다시 클론하니 정상 출력 db 깨짐 현상 발생
  또한 my.cnf 과도한 권한으로 mysql이 무시하는 경우 발생. 이것을 해결해도 위 현상은 동일. 현재 db와 table 모두 charset을 지정하는 방법을 시도해봐야함  
